<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPOIRD Tactical Analyzer</title>
    <style>
        /* ============================= */
/* ANALISI TATTICA – ALLINEAMENTO */
/* ============================= */

.analisi-section {
    margin-bottom: 64px;
}

.analisi-section h2 {
    font-size: 11px;
    color: #6b7280;
    margin-bottom: 24px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
}

/* blocchi come cronometro / possesso / gol */
.analysis-block {
    background: #fafafa;
    border: 1px solid #e5e7eb;
    border-radius: 2px;
    padding: 40px;
    margin-bottom: 40px;
}

/* titolo macrocategoria */
.analysis-block h3 {
    font-size: 11px;
    color: #6b7280;
    margin-bottom: 24px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
}

/* righe dati */
.analysis-row {
    display: grid;
    grid-template-columns: 220px repeat(auto-fit, minmax(90px, 1fr));
    gap: 12px;
    align-items: center;
    margin-bottom: 16px;
}

/* label come summary-label */
.analysis-row label {
    font-size: 11px;
    color: #6b7280;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* input coerenti */
.analysis-row input,
.analysis-row textarea {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    padding: 10px 12px;
    font-size: 12px;
    font-family: inherit;
    color: #1a1a1a;
}

/* focus elegante */
.analysis-row input:focus,
.analysis-row textarea:focus {
    outline: none;
    border-color: #1a1a1a;
}

/* textarea */
.analysis-row textarea {
    resize: vertical;
}

/* mobile */
@media (max-width: 768px) {
    .analysis-block {
        padding: 24px;
    }

    .analysis-row {
        grid-template-columns: 1fr;
    }
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #ffffff;
            min-height: 100vh;
            padding: 0;
            color: #1a1a1a;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #ffffff;
            min-height: 100vh;
        }

        header {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
            padding: 32px 48px;
        }

        header h1 {
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.5px;
            color: #1a1a1a;
        }

        main {
            padding: 48px;
            max-width: 900px;
            margin: 0 auto;
        }

        section {
            margin-bottom: 64px;
        }

        section h2 {
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 16px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        /* TEMPO SECTION */
        .tempo-indicators {
            display: inline-flex;
            gap: 0;
            margin-bottom: 40px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            overflow: hidden;
        }

        .tempo-btn {
            padding: 10px 24px;
            font-size: 13px;
            font-weight: 500;
            border: none;
            background: #ffffff;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s ease;
            border-right: 1px solid #e5e7eb;
        }

        .tempo-btn:last-child {
            border-right: none;
        }

        .tempo-btn:hover {
            background: #f9fafb;
            color: #1a1a1a;
        }

        .tempo-btn.active {
            background: #1a1a1a;
            color: #ffffff;
        }

        .cronometro {
            background: #fafafa;
            padding: 56px 48px;
            border-radius: 2px;
            margin-bottom: 40px;
            border: 1px solid #e5e7eb;
        }

        .timer-display {
            font-size: 72px;
            font-weight: 300;
            color: #1a1a1a;
            margin-bottom: 40px;
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            letter-spacing: -3px;
            text-align: center;
        }

        .timer-controls {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .btn {
            padding: 10px 20px;
            font-size: 12px;
            font-weight: 500;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-family: inherit;
            background: #ffffff;
            color: #1a1a1a;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:hover:not(:disabled) {
            background: #f9fafb;
            border-color: #1a1a1a;
        }

        .btn-start {
            background: #1a1a1a;
            color: #ffffff;
            border-color: #1a1a1a;
        }

        .btn-start:hover:not(:disabled) {
            background: #000000;
        }

        .btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .possesso-container {
            background: #fafafa;
            padding: 40px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
        }

        .possesso-container h3 {
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 24px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .possesso-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 40px;
        }

        .btn-possesso {
            flex: 1;
            padding: 20px 24px;
            font-size: 14px;
            font-weight: 500;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.15s ease;
            background: #ffffff;
            color: #6b7280;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-possesso:hover {
            border-color: #1a1a1a;
            color: #1a1a1a;
        }

        .btn-possesso.active {
            border-color: #1a1a1a;
            background: #1a1a1a;
            color: #ffffff;
        }

        .btn-possesso-percentage {
            font-size: 24px;
            font-weight: 300;
            font-family: 'SF Mono', monospace;
        }

        .possesso-stats {
            margin-top: 32px;
        }

        .possesso-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .possesso-summary-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .summary-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-value {
            font-size: 20px;
            color: #1a1a1a;
            font-family: 'SF Mono', monospace;
            font-weight: 400;
        }

        /* PUNTEGGIO SECTION */
        .gol-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            background: #fafafa;
            padding: 48px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
            margin-bottom: 32px;
        }

        .gol-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }

        .gol-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .gol-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .btn-gol {
            width: 40px;
            height: 40px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            background: #ffffff;
            color: #1a1a1a;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-gol:hover {
            border-color: #1a1a1a;
        }

        .gol-value {
            font-size: 64px;
            font-weight: 300;
            color: #1a1a1a;
            font-family: 'SF Mono', monospace;
            min-width: 80px;
            text-align: center;
        }

        .gol-separator {
            font-size: 48px;
            font-weight: 300;
            color: #e5e7eb;
        }

        .xg-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 32px;
        }

        .xg-team {
            background: #fafafa;
            padding: 24px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
        }

        .xg-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .xg-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .xg-value {
            font-size: 28px;
            font-weight: 300;
            color: #1a1a1a;
            font-family: 'SF Mono', monospace;
        }

        .xg-status {
            margin-top: 8px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-radius: 3px;
            background: #e5e7eb;
            color: #6b7280;
        }

        .status-badge.ok {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.under {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-badge.over {
            background: #dbeafe;
            color: #1e40af;
        }

        .timeline-container {
            background: #fafafa;
            padding: 32px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
        }

        .timeline-container h3 {
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 24px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .timeline-wrapper {
            margin-bottom: 24px;
        }

        .timeline-bar {
            position: relative;
            height: 40px;
            margin-bottom: 8px;
        }

        .timeline-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #e5e7eb;
            transform: translateY(-50%);
        }

        .timeline-markers {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
        }

        .timeline-marker {
            position: absolute;
            top: 50%;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #1a1a1a;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .timeline-marker:hover {
            width: 16px;
            height: 16px;
        }

        .timeline-marker.gol-noi {
            background: #059669;
        }

        .timeline-marker.gol-loro {
            background: #dc2626;
        }

        .timeline-scale {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: #9ca3af;
            font-family: 'SF Mono', monospace;
        }

        .eventi-list {
            margin-top: 24px;
            border-top: 1px solid #e5e7eb;
            padding-top: 16px;
        }

        .no-eventi {
            font-size: 12px;
            color: #9ca3af;
            text-align: center;
            font-style: italic;
        }

        .evento-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .evento-item:last-child {
            border-bottom: none;
        }

        .evento-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .evento-time {
            font-size: 13px;
            font-weight: 600;
            color: #1a1a1a;
            font-family: 'SF Mono', monospace;
            min-width: 40px;
        }

        .evento-team {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: #6b7280;
            letter-spacing: 0.5px;
        }

        .evento-desc {
            font-size: 12px;
            color: #1a1a1a;
        }

        .evento-delete {
            font-size: 11px;
            color: #dc2626;
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .evento-delete:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            main {
                padding: 32px 24px;
            }

            header {
                padding: 24px;
            }

            .timer-display {
                font-size: 56px;
            }
            
            .cronometro {
                padding: 40px 24px;
            }

            .possesso-container {
                padding: 24px;
            }

            .btn-possesso {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }

            .tempo-indicators {
                width: 100%;
            }

            .tempo-btn {
                flex: 1;
            }

            .gol-container {
                padding: 32px 24px;
                gap: 24px;
            }

            .gol-value {
                font-size: 48px;
            }
        }
        .micro-stat {
    display: grid;
    grid-template-columns: 1fr auto auto;
    align-items: center;
    gap: 16px;
    padding: 8px 0;
    border-bottom: 1px dashed #e5e7eb;
}

.micro-label {
    font-size: 13px;
    color: #374151;
}

.micro-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.micro-controls button {
    width: 28px;
    height: 28px;
    border: 1px solid #d1d5db;
    background: #fff;
    cursor: pointer;
}

.micro-value {
    width: 24px;
    text-align: center;
    font-weight: 500;
}

.micro-score {
    font-size: 12px;
    color: #6b7280;
}

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>IPOIRD TACTICAL ANALYZER</h1>
        </header>

        <main>
            <!-- PUNTO 1: TEMPO -->
            <section class="tempo-section">
                <h2>TEMPO</h2>
                
                <div class="tempo-indicators">
                    <button class="tempo-btn active" id="primo-tempo" data-tempo="1">1° TEMPO</button>
                    <button class="tempo-btn" id="secondo-tempo" data-tempo="2">2° TEMPO</button>
                </div>

                <div class="cronometro">
                    <div class="timer-display" id="timer-display">00:00</div>
                    <div class="timer-controls">
                        <button class="btn btn-start" id="btn-start">START</button>
                        <button class="btn btn-pause" id="btn-pause" disabled>PAUSA</button>
                        <button class="btn btn-stop" id="btn-stop" disabled>STOP</button>
                    </div>
                </div>

                <div class="possesso-container">
                    <h3>POSSESSO PALLA</h3>
                    
                    <div class="possesso-controls">
                        <button class="btn-possesso btn-noi" id="btn-possesso-noi">
                            <span class="team-label">NOI</span>
                            <span class="btn-possesso-percentage" id="btn-possesso-noi-percentage">50%</span>
                        </button>
                        <button class="btn-possesso btn-loro" id="btn-possesso-loro">
                            <span class="team-label">LORO</span>
                            <span class="btn-possesso-percentage" id="btn-possesso-loro-percentage">50%</span>
                        </button>
                    </div>

                    <div class="possesso-stats">
                        <div class="possesso-summary">
                            <div class="possesso-summary-item">
                                <span class="summary-label">Tempo NOI</span>
                                <span class="summary-value" id="possesso-noi-time">00:00</span>
                            </div>
                            <div class="possesso-summary-item">
                                <span class="summary-label">Tempo LORO</span>
                                <span class="summary-value" id="possesso-loro-time">00:00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PUNTO 2: PUNTEGGIO -->
            <div class="analysis-card">
    <h3>PUNTEGGIO</h3>

    <div class="scoreboard">

        <div class="team-score" data-team="noi">
            <span class="team-label">NOI</span>
            <div class="score-controls">
                <button class="score-minus">Elimina</button>
                <span class="score-value" id="score-noi">0</span>
                <button class="score-plus">+</button>
            </div>
        </div>

        <div class="team-score" data-team="loro">
            <span class="team-label">LORO</span>
            <div class="score-controls">
                <button class="score-minus">Elimina</button>
                <span class="score-value" id="score-loro">0</span>
                <button class="score-plus">+</button>
            </div>
        </div>

    </div>
</div>


                    <div class="gol-separator">-</div>

                    <div class="gol-team">
                        <span class="gol-label">LORO</span>
                        <div class="gol-controls">
                            <button class="btn-gol btn-gol-minus" data-team="loro">-</button>
                            <span class="gol-value" id="gol-loro">0</span>
                            <button class="btn-gol btn-gol-plus" data-team="loro">+</button>
                        </div>
                    </div>
                </div>

                <div class="xg-container">
                    <div class="xg-team">
                        <div class="xg-header">
                            <span class="xg-label">xG NOI</span>
                            <span class="xg-value" id="xg-noi">0.00</span>
                        </div>
                        <div class="xg-status" id="xg-status-noi">
                            <span class="status-badge">OK</span>
                        </div>
                    </div>

                    <div class="xg-team">
                        <div class="xg-header">
                            <span class="xg-label">xG LORO</span>
                            <span class="xg-value" id="xg-loro">0.00</span>
                        </div>
                        <div class="xg-status" id="xg-status-loro">
                            <span class="status-badge">OK</span>
                        </div>
                    </div>
                </div>

                <div class="timeline-container">
                    <h3>TIMELINE EVENTI</h3>
                    <div class="timeline-wrapper">
                        <div class="timeline-bar">
                            <div class="timeline-line"></div>
                            <div class="timeline-markers" id="timeline-markers"></div>
                        </div>
                        <div class="timeline-scale">
                            <span>0'</span>
                            <span>15'</span>
                            <span>30'</span>
                            <span>45'</span>
                            <span>60'</span>
                            <span>75'</span>
                            <span>90'</span>
                        </div>
                    </div>
                    <div class="eventi-list" id="eventi-list">
                        <p class="no-eventi">Nessun evento registrato</p>
                    </div>
                </div>
            </section>
            <!-- PUNTO 3: ANALISI TATTICA -->
<section class="analisi-section">
    <h2>ANALISI TATTICA</h2>

    <!-- FINALIZZAZIONE -->
    <div class="analysis-block">
        <h3>FINALIZZAZIONE</h3>

        <div class="analysis-row">
            <label>Tiri totali</label>
            <input type="number" placeholder="Tot">
            <input type="number" placeholder="In porta">
            <input type="number" placeholder="Fuori">
            <input type="number" placeholder="Bloccati">
        </div>

        <div class="analysis-row">
            <label>Tiri da area</label>
            <input type="number" placeholder="Dentro">
            <input type="number" placeholder="Fuori">
        </div>

        <div class="analysis-row">
            <label>Gol segnati</label>
            <input type="number">
        </div>

        <div class="analysis-row">
            <label>Assistenze</label>
            <input type="number">
        </div>

        <div class="analysis-row">
            <label>Cross</label>
            <input type="number" placeholder="Riusciti">
            <input type="number" placeholder="Tentati">
        </div>
    </div>

    <!-- PALLA INATTIVA -->
    <div class="analysis-block">
        <h3>SITUAZIONI DA PALLA INATTIVA</h3>

        <div class="analysis-row">
            <label>Corner</label>
            <input type="number" placeholder="A favore">
            <input type="number" placeholder="Contro">
        </div>

        <div class="analysis-row">
            <label>Punizioni pericolose</label>
            <input type="number">
        </div>

        <div class="analysis-row">
            <label>Gol / Tiri da p.i.</label>
            <input type="number" placeholder="Gol">
            <input type="number" placeholder="Tiri">
        </div>
    </div>

    <!-- TRANSIZIONI OFFENSIVE -->
    <div class="analysis-block">
        <h3>TRANSIZIONI OFFENSIVE</h3>

        <div class="analysis-row">
            <label>Contropiedi completati</label>
            <input type="number">
        </div>

        <div class="analysis-row">
            <label>Attacchi diretti</label>
            <input type="number">
        </div>
    </div>

    <!-- CONTRASTO E RECUPERO -->
    <div class="analysis-block">
        <h3>CONTRASTO E RECUPERO</h3>

        <div class="analysis-row">
            <label>Contrasti</label>
            <input type="number" placeholder="Vinti">
            <input type="number" placeholder="Tentati">
        </div>

        <div class="analysis-row">
            <label>Intercettazioni</label>
            <input type="number">
        </div>

        <div class="analysis-row">
            <label>Duelli aerei vinti</label>
            <input type="number">
        </div>
    </div>

    <!-- PROGRESSIONE -->
    <div class="analysis-block">
        <h3>PROGRESSIONE</h3>

        <div class="analysis-row">
            <label>Dribbling</label>
            <input type="number" placeholder="Riusciti">
            <input type="number" placeholder="Tentati">
        </div>

        <div class="analysis-row">
            <label>Passaggi in profondità</label>
            <input type="number">
        </div>
    </div>

    <!-- TRANSIZIONI DIFENSIVE -->
    <div class="analysis-block">
        <h3>TRANSIZIONI DIFENSIVE</h3>

        <div class="analysis-row">
            <label>Contropiedi subiti</label>
            <input type="number">
        </div>

        <div class="analysis-row">
            <label>Perdite palla zona pericolosa</label>
            <input type="number">
        </div>

        <div class="analysis-row">
            <label>Falli tattici</label>
            <input type="number">
        </div>
    </div>

    <!-- NOTE AVVERSARIO -->
    <div class="analysis-block">
        <h3>NOTE AVVERSARIO</h3>

        <div class="analysis-row">
            <label>Modulo avversario</label>
            <input type="text" placeholder="Es. 1-4-3-3">
        </div>

        <div class="analysis-row">
            <label>Stile di gioco</label>
            <input type="text" placeholder="Es. diretto / posizionale / reattivo">
        </div>

        <div class="analysis-row">
            <label>Note qualitative</label>
            <textarea rows="3" placeholder="Osservazioni libere"></textarea>
        </div>
    </div>
</section>

        </main>
    </div>

    <script>
        // Variabili globali
        let timerInterval = null;
        let totalSeconds = 0;
        let isRunning = false;
        let currentTempo = 1;
        let possessoNoi = 0;
        let possessoLoro = 0;
        let currentPossesso = null;
        let possessoStartTime = 0;
        let golNoi = 0;
        let golLoro = 0;
        let xgNoi = 0;
        let xgLoro = 0;
        let eventi = [];

        // Elementi DOM
        const timerDisplay = document.getElementById('timer-display');
        const btnStart = document.getElementById('btn-start');
        const btnPause = document.getElementById('btn-pause');
        const btnStop = document.getElementById('btn-stop');
        const btnPrimoTempo = document.getElementById('primo-tempo');
        const btnSecondoTempo = document.getElementById('secondo-tempo');
        const btnPossessoNoi = document.getElementById('btn-possesso-noi');
        const btnPossessoLoro = document.getElementById('btn-possesso-loro');
        const btnPossessoNoiPercentage = document.getElementById('btn-possesso-noi-percentage');
        const btnPossessoLoroPercentage = document.getElementById('btn-possesso-loro-percentage');
        const possessoNoiTime = document.getElementById('possesso-noi-time');
        const possessoLoroTime = document.getElementById('possesso-loro-time');
        const golNoiDisplay = document.getElementById('gol-noi');
        const golLoroDisplay = document.getElementById('gol-loro');
        const xgNoiDisplay = document.getElementById('xg-noi');
        const xgLoroDisplay = document.getElementById('xg-loro');
        const xgStatusNoi = document.getElementById('xg-status-noi');
        const xgStatusLoro = document.getElementById('xg-status-loro');
        const timelineMarkers = document.getElementById('timeline-markers');
        const eventiList = document.getElementById('eventi-list');
        const btnGolPlus = document.querySelectorAll('.btn-gol-plus');
        const btnGolMinus = document.querySelectorAll('.btn-gol-minus');

        // Funzioni Timer
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function updateTimer() {
            totalSeconds++;
            timerDisplay.textContent = formatTime(totalSeconds);
            updatePossesso();
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(updateTimer, 1000);
                btnStart.disabled = true;
                btnPause.disabled = false;
                btnStop.disabled = false;
                btnStart.textContent = 'IN CORSO...';
            }
        }

        function pauseTimer() {
            if (isRunning) {
                clearInterval(timerInterval);
                isRunning = false;
                btnStart.disabled = false;
                btnPause.disabled = true;
                btnStart.textContent = 'RIPRENDI';
            }
        }

        function stopTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            totalSeconds = 0;
            possessoNoi = 0;
            possessoLoro = 0;
            currentPossesso = null;
            timerDisplay.textContent = '00:00';
            btnStart.disabled = false;
            btnPause.disabled = true;
            btnStop.disabled = true;
            btnStart.textContent = 'START';
            updatePossessoDisplay();
            btnPossessoNoi.classList.remove('active');
            btnPossessoLoro.classList.remove('active');
        }

        // Funzioni Possesso
        function setPossesso(team) {
            const now = totalSeconds;
            
            if (currentPossesso && currentPossesso !== team) {
                const elapsed = now - possessoStartTime;
                if (currentPossesso === 'noi') {
                    possessoNoi += elapsed;
                } else {
                    possessoLoro += elapsed;
                }
            }
            
            currentPossesso = team;
            possessoStartTime = now;
            
            if (team === 'noi') {
                btnPossessoNoi.classList.add('active');
                btnPossessoLoro.classList.remove('active');
            } else {
                btnPossessoLoro.classList.add('active');
                btnPossessoNoi.classList.remove('active');
            }
            
            updatePossessoDisplay();
        }

        function updatePossesso() {
            if (currentPossesso && isRunning) {
                updatePossessoDisplay();
            }
        }

        function updatePossessoDisplay() {
            let tempNoiPossesso = possessoNoi;
            let tempLoroPossesso = possessoLoro;
            
            if (currentPossesso && isRunning) {
                const elapsed = totalSeconds - possessoStartTime;
                if (currentPossesso === 'noi') {
                    tempNoiPossesso += elapsed;
                } else {
                    tempLoroPossesso += elapsed;
                }
            }
            
            const total = tempNoiPossesso + tempLoroPossesso;
            
            if (total > 0) {
                const noiPercentage = (tempNoiPossesso / total) * 100;
                const loroPercentage = (tempLoroPossesso / total) * 100;
                
                btnPossessoNoiPercentage.textContent = Math.round(noiPercentage) + '%';
                btnPossessoLoroPercentage.textContent = Math.round(loroPercentage) + '%';
                possessoNoiTime.textContent = formatTime(tempNoiPossesso);
                possessoLoroTime.textContent = formatTime(tempLoroPossesso);
            } else {
                btnPossessoNoiPercentage.textContent = '50%';
                btnPossessoLoroPercentage.textContent = '50%';
                possessoNoiTime.textContent = '00:00';
                possessoLoroTime.textContent = '00:00';
            }
        }

        // Funzioni Punteggio
        function addGol(team) {
            if (team === 'noi') {
                golNoi++;
                golNoiDisplay.textContent = golNoi;
            } else {
                golLoro++;
                golLoroDisplay.textContent = golLoro;
            }
            
            const time = formatTime(totalSeconds);
            const evento = {
                type: 'gol',
                team: team,
                time: time,
                minute: totalSeconds,
                timestamp: Date.now()
            };
            eventi.push(evento);
            
            updateTimeline();
            updateEventiList();
            updateXgStatus();
        }

        function removeGol(team) {
            if (team === 'noi' && golNoi > 0) {
                golNoi--;
                golNoiDisplay.textContent = golNoi;
                
                for (let i = eventi.length - 1; i >= 0; i--) {
                    if (eventi[i].type === 'gol' && eventi[i].team === 'noi') {
                        eventi.splice(i, 1);
                        break;
                    }
                }
            } else if (team === 'loro' && golLoro > 0) {
                golLoro--;
                golLoroDisplay.textContent = golLoro;
                
                for (let i = eventi.length - 1; i >= 0; i--) {
                    if (eventi[i].type === 'gol' && eventi[i].team === 'loro') {
                        eventi.splice(i, 1);
                        break;
                    }
                }
            }
            
            updateTimeline();
            updateEventiList();
            updateXgStatus();
        }

        function updateXG(team, value) {
            if (team === 'noi') {
                xgNoi += value;
                xgNoiDisplay.textContent = xgNoi.toFixed(2);
            } else {
                xgLoro += value;
                xgLoroDisplay.textContent = xgLoro.toFixed(2);
            }
            updateXgStatus();
        }

        function updateXgStatus() {
            const statusNoiBadge = xgStatusNoi.querySelector('.status-badge');
            if (xgNoi > golNoi) {
                statusNoiBadge.textContent = 'Underperformance';
                statusNoiBadge.className = 'status-badge under';
            } else if (xgNoi < golNoi) {
                statusNoiBadge.textContent = 'Overperformance';
                statusNoiBadge.className = 'status-badge over';
            } else {
                statusNoiBadge.textContent = 'OK';
                statusNoiBadge.className = 'status-badge ok';
            }
            
            const statusLoroBadge = xgStatusLoro.querySelector('.status-badge');
            if (xgLoro > golLoro) {
                statusLoroBadge.textContent = 'Underperformance';
                statusLoroBadge.className = 'status-badge under';
            } else if (xgLoro < golLoro) {
                statusLoroBadge.textContent = 'Overperformance';
                statusLoroBadge.className = 'status-badge over';
                } else if (xgLoro < golLoro) {
    statusLoroBadge.textContent = 'Overperformance';
    statusLoroBadge.className = 'status-badge over';
        } else {
            statusLoroBadge.textContent = 'OK';
            statusLoroBadge.className = 'status-badge ok';
        }
    }
        function updateTimeline() {
            timelineMarkers.innerHTML = '';

            eventi.forEach(evento => {
                if (evento.type === 'gol') {
                    const marker = document.createElement('div');
                    marker.classList.add('timeline-marker');
                    marker.classList.add(evento.team === 'noi' ? 'gol-noi' : 'gol-loro');

                    const percent = Math.min((evento.minute / 5400) * 100, 100);
                    marker.style.left = percent + '%';

                    timelineMarkers.appendChild(marker);
                }
            });
        }

        function updateEventiList() {
            eventiList.innerHTML = '';

            if (eventi.length === 0) {
                eventiList.innerHTML = `<p class="no-eventi">Nessun evento registrato</p>`;
                return;
            }

            eventi
                .slice()
                .reverse()
                .forEach((evento, index) => {
                    const item = document.createElement('div');
                    item.className = 'evento-item';

                    item.innerHTML = `
                        <div class="evento-info">
                            <span class="evento-time">${evento.time}</span>
                            <span class="evento-team">${evento.team}</span>
                            <span class="evento-desc">Gol</span>
                        </div>
                        <button class="evento-delete" data-index="${eventi.length - 1 - index}">
                            Elimina
                        </button>
                    `;

                    eventiList.appendChild(item);
                });

            document.querySelectorAll('.evento-delete').forEach(btn => {
                btn.addEventListener('click', e => {
                    const idx = parseInt(e.target.dataset.index);
                    eventi.splice(idx, 1);
                    updateTimeline();
                    updateEventiList();
                });
            });
        }
        // TIMER
        btnStart.addEventListener('click', startTimer);
        btnPause.addEventListener('click', pauseTimer);
        btnStop.addEventListener('click', stopTimer);

        // POSSESSO
        btnPossessoNoi.addEventListener('click', () => setPossesso('noi'));
        btnPossessoLoro.addEventListener('click', () => setPossesso('loro'));

        // TEMPI
        btnPrimoTempo.addEventListener('click', () => {
            currentTempo = 1;
            btnPrimoTempo.classList.add('active');
            btnSecondoTempo.classList.remove('active');
        });

        btnSecondoTempo.addEventListener('click', () => {
            currentTempo = 2;
            btnSecondoTempo.classList.add('active');
            btnPrimoTempo.classList.remove('active');
        });

        // GOL
        btnGolPlus.forEach(btn => {
            btn.addEventListener('click', () => {
                addGol(btn.dataset.team);
            });
        });

        btnGolMinus.forEach(btn => {
            btn.addEventListener('click', () => {
                removeGol(btn.dataset.team);
            });
        });
        updatePossessoDisplay();
    </script>
    <script>
document.querySelectorAll('.team-score').forEach(team => {
    const plusBtn = team.querySelector('.score-plus');
    const minusBtn = team.querySelector('.score-minus');
    const valueEl = team.querySelector('.score-value');

    plusBtn.addEventListener('click', () => {
        let value = parseInt(valueEl.textContent);
        valueEl.textContent = value + 1;
    });

    minusBtn.addEventListener('click', () => {
        let value = parseInt(valueEl.textContent);
        if (value > 0) {
            valueEl.textContent = value - 1;
        }
    });
});
</script>

</body>
</html>
