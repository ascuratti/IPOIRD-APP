<!DOCTYPE html>
<html lang="it">
<head>
    <link rel="stylesheet" href="apple-style.css">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPOIRD Tactical Analyzer</title>
    <style>
        /* ============================= */
/* ANALISI TATTICA – ALLINEAMENTO */
/* ============================= */

.analisi-section {
    margin-bottom: 64px;
}

.analisi-section h2 {
    font-size: 11px;
    color: #6b7280;
    margin-bottom: 24px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
}

/* blocchi come cronometro / possesso / gol */
.analysis-block {
    background: #fafafa;
    border: 1px solid #e5e7eb;
    border-radius: 2px;
    padding: 40px;
    margin-bottom: 40px;
}

/* titolo macrocategoria */
.analysis-block h3 {
    font-size: 11px;
    color: #6b7280;
    margin-bottom: 24px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
}

/* righe dati */
.analysis-row {
    display: grid;
    grid-template-columns: 220px repeat(auto-fit, minmax(90px, 1fr));
    gap: 12px;
    align-items: center;
    margin-bottom: 16px;
}

/* label come summary-label */
.analysis-row label {
    font-size: 11px;
    color: #6b7280;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* input coerenti */
.analysis-row input,
.analysis-row textarea {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    padding: 10px 12px;
    font-size: 12px;
    font-family: inherit;
    color: #1a1a1a;
}

/* focus elegante */
.analysis-row input:focus,
.analysis-row textarea:focus {
    outline: none;
    border-color: #1a1a1a;
}

/* textarea */
.analysis-row textarea {
    resize: vertical;
}

/* mobile */
@media (max-width: 768px) {
    .analysis-block {
        padding: 24px;
    }

    .analysis-row {
        grid-template-columns: 1fr;
    }
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
  font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
  
            background: #ffffff;
            min-height: 100vh;
            padding: 0;
            color: #1a1a1a;
        }

        .container {
        
  max-width: 1200px;
  width: 100%;
  margin: 0 auto;
            background: #ffffff;
            min-height: 100vh;
        }

        header {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
            padding: 32px 48px;
        }

        header h1 {
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.5px;
            color: #1a1a1a;
        }

        main {
            padding: 48px;
            max-width: 900px;
            margin: 0 auto;
        }

        section {
            margin-bottom: 64px;
        }

        section h2 {
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 16px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        /* TEMPO SECTION */
        .tempo-indicators {
            display: inline-flex;
            gap: 0;
            margin-bottom: 40px;
            border: 1px solid #ffffff00;
            border-radius: 6px;
            overflow: hidden;
        }

        .tempo-btn {
            padding: 10px 24px;
            font-size: 13px;
            font-weight: 500;
            border: none;
            background: #ffffff;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s ease;
            border-right: 1px solid #e5e7eb;
        }

        .tempo-btn:last-child {
            border-right: none;
        }

        .tempo-btn:hover {
            background: #f9fafb;
            color: #1a1a1a;
        }

        .tempo-btn.active {
            background: #1a1a1a;
            color: #ffffff;
        }

        .cronometro {
            background: #fafafa;
            padding: 56px 48px;
            border-radius: 2px;
            margin-bottom: 40px;
            border: 1px solid #e5e7eb;
        }

        .timer-display {
            font-size: 72px;
            font-weight: 300;
            color: #1a1a1a;
            margin-bottom: 40px;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
            letter-spacing: -3px;
            text-align: center;
        }

        .timer-controls {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .btn {
            padding: 10px 20px;
            font-size: 12px;
            font-weight: 500;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
            background: #ffffff;
            color: #1a1a1a;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:hover:not(:disabled) {
            background: #f9fafb;
            border-color: #1a1a1a;
        }

        .btn-start {
            background: #1a1a1a;
            color: #ffffff;
            border-color: #1a1a1a;
        }

        .btn-start:hover:not(:disabled) {
            background: #000000;
        }

        .btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .possesso-container {
            background: #fafafa;
            padding: 40px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
        }

        .possesso-container h3 {
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 24px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .possesso-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 40px;
        }

        .btn-possesso {
            flex: 1;
            padding: 20px 24px;
            font-size: 14px;
            font-weight: 500;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.15s ease;
            background: #ffffff;
            color: #6b7280;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-possesso:hover {
            border-color: #1a1a1a;
            color: #1a1a1a;
        }

        .btn-possesso.active {
            border-color: #1a1a1a;
            background: #1a1a1a;
            color: #ffffff;
        }

        .btn-possesso-percentage {
            font-size: 24px;
            font-weight: 300;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
        }

        .possesso-stats {
            margin-top: 32px;
        }

        .possesso-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .possesso-summary-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .summary-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-value {
            font-size: 20px;
            color: #1a1a1a;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
            font-weight: 400;
        }

        /* PUNTEGGIO SECTION */
        .gol-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            background: #fafafa;
            padding: 48px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
            margin-bottom: 32px;
        }

        .gol-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }

        .gol-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .gol-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .btn-gol {
            width: 40px;
            height: 40px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            background: #ffffff;
            color: #1a1a1a;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-gol:hover {
            border-color: #1a1a1a;
        }

        .gol-value {
            font-size: 64px;
            font-weight: 300;
            color: #1a1a1a;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
            min-width: 80px;
            text-align: center;
        }

        .gol-separator {
            font-size: 48px;
            font-weight: 300;
            color: #e5e7eb;
        }

        .xg-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 32px;
        }

        .xg-team {
            background: #fafafa;
            padding: 24px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
        }

        .xg-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .xg-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .xg-value {
            font-size: 28px;
            font-weight: 300;
            color: #1a1a1a;
            font-family: 'Bahnschrift';
        }

        .xg-status {
            margin-top: 8px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-radius: 3px;
            background: #e5e7eb;
            color: #6b7280;
        }

        .status-badge.ok {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.under {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-badge.over {
            background: #dbeafe;
            color: #1e40af;
        }

        .timeline-container {
            background: #fafafa;
            padding: 32px;
            border-radius: 2px;
            border: 1px solid #e5e7eb;
        }

        .timeline-container h3 {
            font-size: 11px;
            color: #6b7280;
            margin-bottom: 24px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .timeline-wrapper {
            margin-bottom: 24px;
        }

        .timeline-bar {
            position: relative;
            height: 40px;
            margin-bottom: 8px;
        }

        .timeline-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #e5e7eb;
            transform: translateY(-50%);
        }

        .timeline-markers {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
        }

        .timeline-marker {
            position: absolute;
            top: 50%;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #1a1a1a;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .timeline-marker:hover {
            width: 16px;
            height: 16px;
        }

        .timeline-marker.gol-noi {
            background: #059669;
        }

        .timeline-marker.gol-loro {
            background: #dc2626;
        }

        .timeline-scale {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: #9ca3af;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
        }

        .eventi-list {
            margin-top: 24px;
            border-top: 1px solid #e5e7eb;
            padding-top: 16px;
        }

        .no-eventi {
            font-size: 12px;
            color: #9ca3af;
            text-align: center;
            font-style: italic;
        }

        .evento-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .evento-item:last-child {
            border-bottom: none;
        }

        .evento-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .evento-time {
            font-size: 13px;
            font-weight: 600;
            color: #1a1a1a;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
            min-width: 40px;
        }

        .evento-team {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: #6b7280;
            letter-spacing: 0.5px;
        }

        .evento-desc {
            font-size: 12px;
            color: #1a1a1a;
        }

        .evento-delete {
            font-size: 11px;
            color: #dc2626;
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .evento-delete:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            main {
                padding: 32px 24px;
            }

            header {
                padding: 24px;
            }

            .timer-display {
                font-size: 56px;
            }
            
            .cronometro {
                padding: 40px 24px;
            }

            .possesso-container {
                padding: 24px;
            }

            .btn-possesso {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }

            .tempo-indicators {
                width: 100%;
            }

            .tempo-btn {
                flex: 1;
            }

            .gol-container {
                padding: 32px 24px;
                gap: 24px;
            }

            .gol-value {
                font-size: 48px;
            }
        }
        .micro-stat {
    display: grid;
    grid-template-columns: 1fr auto auto;
    align-items: center;
    gap: 16px;
    padding: 8px 0;
    border-bottom: 1px dashed #e5e7eb;
}

.micro-label {
    font-size: 13px;
    color: #374151;
}

.micro-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.micro-controls button {
    width: 28px;
    height: 28px;
    border: 1px solid #d1d5db;
    background: #fff;
    cursor: pointer;
}

.micro-value {
    width: 24px;
    text-align: center;
    font-weight: 500;
}

.micro-score {
    font-size: 12px;
    color: #6b7280;
}
/* MACRO CATEGORIES - ACCORDION */
.macro-category {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    margin-bottom: 12px;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.macro-category:hover {
    border-color: #d1d5db;
}

.macro-header {
    width: 100%;
    padding: 20px 24px;
    background: #fafafa;
    border: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.macro-header:hover {
    background: #f3f4f6;
}

.macro-title {
    font-size: 11px;
    font-weight: 600;
    color: #6b7280;
    letter-spacing: 1.2px;
    text-transform: uppercase;
}

.macro-arrow {
    font-size: 20px;
    color: #9ca3af;
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.macro-category.open .macro-arrow {
    transform: rotate(90deg);
}

.macro-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.macro-category.open .macro-content {
    max-height: 2000px;
}

/* MICRO STATS */
.micro-header {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    gap: 16px;
    padding: 16px 24px;
    background: #f9fafb;
    border-bottom: 1px solid #e5e7eb;
}

.team-label {
    font-size: 10px;
    font-weight: 600;
    color: #6b7280;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    text-align: center;
}

.micro-stat {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    gap: 16px;
    align-items: center;
    padding: 16px 24px;
    border-bottom: 1px solid #f3f4f6;
    transition: background 0.2s ease;
}

.micro-stat:hover {
    background: #fafafa;
}

.micro-stat:last-child {
    border-bottom: none;
}

.micro-label {
    font-size: 13px;
    color: #374151;
    font-weight: 400;
}

.micro-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

.micro-btn {
    width: 32px;
    height: 32px;
    border: 1px solid #e5e7eb;
    background: #ffffff;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    color: #6b7280;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.micro-btn:hover {
    border-color: #1a1a1a;
    color: #1a1a1a;
    transform: scale(1.05);
}

.micro-btn:active {
    transform: scale(0.95);
}

.micro-btn.plus {
    background: #1a1a1a;
    color: #ffffff;
    border-color: #1a1a1a;
}

.micro-btn.plus:hover {
    background: #000000;
}

.micro-value {
    font-size: 16px;
    font-weight: 500;
    color: #1a1a1a;
    min-width: 24px;
    text-align: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Bahnschrift';
}

/* Responsive */
@media (max-width: 768px) {
    .micro-stat {
        grid-template-columns: 1fr;
        gap: 12px;
    }
    
    .micro-header {
        grid-template-columns: 1fr;
    }
    
    .team-label {
        text-align: left;
    }
}
/* ===== SEZIONE PUNTEGGIO - RESPONSIVE ===== */
.score-section {
    margin-bottom: 64px;
}

.score-wrapper {
    background: #ffffff;
    border-radius: 24px;
    padding: 40px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.04);
    border: 1px solid #f2f2f7;
}

.score-grid {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 40px;
    align-items: start;
}

.score-team {
    text-align: center;
}

.score-team h3 {
    font-size: 12px;
    color: #8e8e93;
    margin-bottom: 20px;
    font-weight: 600;
}

.score-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 32px;
}

.score-boxes {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 24px;
}

.score-box {
    padding: 14px 16px;
    background: rgba(0, 122, 255, 0.08);
    border-radius: 12px;
    border: 1px solid rgba(0, 122, 255, 0.2);
}

.score-label {
    font-size: 10px;
    color: #8e8e93;
    margin-bottom: 6px;
    font-weight: 600;
}

.score-value-display {
    font-size: 24px;
    color: #007aff;
    font-weight: 400;
}

.score-performance {
    padding: 12px 20px;
    background: rgba(0, 122, 255, 0.15);
    border-radius: 12px;
    border: 1px solid rgba(0, 122, 255, 0.3);
}

.score-performance span {
    font-size: 14px;
    font-weight: 600;
    color: #007aff;
}

.score-vs {
    font-size: 20px;
    color: #c7c7cc;
    padding-top: 60px;
}

/* ===== RESPONSIVE IMPROVEMENTS ===== */

/* Tablet */
@media (max-width: 1024px) {
    main {
        max-width: 100%;
        padding: 32px 24px;
    }

    .score-wrapper {
        padding: 32px;
    }
}

/* Mobile - 768px */
@media (max-width: 768px) {
    .score-grid {
        grid-template-columns: 1fr !important;
        gap: 24px !important;
        align-items: center !important;
    }

    .score-vs {
        display: none !important;
    }

    .score-wrapper {
        padding: 24px 16px !important;
        border-radius: 16px !important;
    }

    .score-controls {
        gap: 16px !important;
    }

    .gol-value {
        font-size: 44px !important;
        min-width: 60px !important;
    }

    .btn-gol {
        width: 36px !important;
        height: 36px !important;
        font-size: 18px !important;
    }

    .score-boxes {
        grid-template-columns: 1fr !important;
    }

    .score-box {
        padding: 12px 14px !important;
    }

    .score-label {
        font-size: 9px !important;
    }

    .score-value-display {
        font-size: 20px !important;
    }

    .score-performance {
        padding: 10px 16px !important;
    }

    .score-performance span {
        font-size: 12px !important;
    }
}

/* Mobile piccolo - 480px */
@media (max-width: 480px) {
    .score-wrapper {
        padding: 16px 12px !important;
        border-radius: 12px !important;
    }

    .score-controls {
        gap: 12px !important;
    }

    .gol-value {
        font-size: 36px !important;
    }

    .btn-gol {
        width: 32px !important;
        height: 32px !important;
        font-size: 16px !important;
    }

    .score-box {
        padding: 10px 12px !important;
    }

    .score-value-display {
        font-size: 18px !important;
    }
}

/* ===== MATCH INFO SECTION ===== */
.match-info-section {
    background: #ffffff;
    border-bottom: 1px solid #e5e7eb;
    padding: 32px 48px;
}

.match-info-container {
    max-width: 900px;
    margin: 0 auto;
}

.match-info-row {
    display: grid;
    grid-template-columns: 180px 1fr;
    gap: 16px;
    align-items: center;
    margin-bottom: 20px;
}

.match-info-row:last-child {
    margin-bottom: 0;
}

.match-info-row label {
    font-size: 11px;
    color: #6b7280;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.8px;
}

.match-info-row input,
.match-info-row select {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    padding: 12px 14px;
    font-size: 13px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
    color: #1a1a1a;
    transition: all 0.2s ease;
}

.match-info-row input:focus,
.match-info-row select:focus {
    outline: none;
    border-color: #1a1a1a;
    box-shadow: 0 0 0 3px rgba(26, 26, 26, 0.1);
}

.match-info-row input::placeholder {
    color: #d1d5db;
}

.match-info-row select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%236b7280' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
}

/* Mobile */
@media (max-width: 768px) {
    .match-info-section {
        padding: 24px;
    }

    .match-info-row {
        grid-template-columns: 1fr;
        gap: 8px;
        margin-bottom: 16px;
    }

    .match-info-row input,
    .match-info-row select {
        padding: 10px 12px;
        font-size: 12px;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>IPOIRD</h1>
        </header>

<!-- SEZIONE INFORMAZIONI PARTITA -->
<section class="match-info-section">
    <div class="match-info-container">
        <div class="match-info-row">
            <label>AVVERSARIO</label>
            <input type="text" id="avversario" placeholder="Es. Inter, Juventus">
        </div>

        <div class="match-info-row">
            <label>DATA</label>
            <input type="date" id="data-partita">
        </div>

        <div class="match-info-row">
            <label>POSIZIONE</label>
            <select id="posizione-partita">
                <option value="">Seleziona...</option>
                <option value="casa">IN CASA</option>
                <option value="fuori">FUORI CASA</option>
            </select>
        </div>
    </div>
</section>
        <main>
            <!-- PUNTO 1: TEMPO -->
            <section class="tempo-section">
                <h2>TEMPO</h2>
                
                <div class="tempo-indicators">
                    <button class="tempo-btn active" id="primo-tempo" data-tempo="1">1° TEMPO</button>
                    <button class="tempo-btn" id="secondo-tempo" data-tempo="2">2° TEMPO</button>
                </div>

                <div class="cronometro">
                    <div class="timer-display" id="timer-display">00:00</div>
                    <div class="timer-controls">
                        <button class="btn btn-start" id="btn-start">START</button>
                        <button class="btn btn-pause" id="btn-pause" disabled>PAUSA</button>
                        <button class="btn btn-stop" id="btn-stop" disabled>STOP</button>
                    </div>
                </div>

                <div class="possesso-container">
                    <h3>POSSESSO PALLA</h3>
                    
                    <div class="possesso-controls">
                        <button class="btn-possesso btn-noi" id="btn-possesso-noi">
                            <span class="team-label">NOI</span>
                            <span class="btn-possesso-percentage" id="btn-possesso-noi-percentage">50%</span>
                        </button>
                        <button class="btn-possesso btn-loro" id="btn-possesso-loro">
                            <span class="team-label">LORO</span>
                            <span class="btn-possesso-percentage" id="btn-possesso-loro-percentage">50%</span>
                        </button>
                    </div>

                   
                </div>
            </section>

            <!-- PUNTO 2: PUNTEGGIO -->
           <!-- PUNTO 2: PUNTEGGIO -->

<section class="score-section">
    <h2>PUNTEGGIO</h2>
    
    <div class="score-wrapper">
        <div class="score-grid">
            
            <!-- NOI -->
            <div class="score-team">
                <h3>NOI</h3>
                
                <div class="score-controls">
                    <button class="btn-gol btn-gol-minus" data-team="noi">−</button>
                    <span class="gol-value" id="gol-noi-new">0</span>
                    <button class="btn-gol btn-gol-plus" data-team="noi">+</button>
                </div>
                
                <!-- xG e xPts -->
                <div class="score-boxes">
                    <div class="score-box">
                        <div class="score-label">xG</div>
                        <div class="score-value-display" id="xg-noi-new">0.00</div>
                    </div>
                    <div class="score-box">
                        <div class="score-label">xPts</div>
                        <div class="score-value-display" id="xpts-noi">1.00</div>
                    </div>
                </div>
                
                <div class="score-performance">
                    <span id="perf-noi">OK</span>
                </div>
            </div>
            
            <!-- VS -->
            <div class="score-vs">VS</div>
            
            <!-- LORO -->
            <div class="score-team">
                <h3>LORO</h3>
                
                <div class="score-controls">
                    <button class="btn-gol btn-gol-minus" data-team="loro">−</button>
                    <span class="gol-value" id="gol-loro-new">0</span>
                    <button class="btn-gol btn-gol-plus" data-team="loro">+</button>
                </div>
                
                <!-- xG e xPts -->
                <div class="score-boxes">
                    <div class="score-box">
                        <div class="score-label">xG</div>
                        <div class="score-value-display" id="xg-loro-new">0.00</div>
                    </div>
                    <div class="score-box">
                        <div class="score-label">xPts</div>
                        <div class="score-value-display" id="xpts-loro">1.00</div>
                    </div>
                </div>
                
                <div class="score-performance">
                    <span id="perf-loro">OK</span>
                </div>
            </div>
        </div>
    </div>
</section>
 <!-- PUNTO 3: ANALISI TATTICA -->
<section class="analisi-section">
    <h2>ANALISI TATTICA</h2>

    <!-- FINALIZZAZIONE -->
    <div class="macro-category">
        <button class="macro-header">
            <span class="macro-title">FINALIZZAZIONE</span>
            <span class="macro-arrow">›</span>
        </button>
        <div class="macro-content">
            <div class="micro-header">
                <span></span>
                <span class="team-label">A FAVORE</span>
                <span class="team-label">AVVERSARI</span>
            </div>
            
            <div class="micro-stat" data-category="finalizzazione" data-item="rete" data-xg="1">
                <span class="micro-label">Rete realizzata</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="finalizzazione" data-item="tiro-specchio" data-xg="0.5">
                <span class="micro-label">Tiro nello specchio</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="finalizzazione" data-item="tiro-no-specchio-area" data-xg="0.4">
                <span class="micro-label">Tiro non nello specchio in area</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="finalizzazione" data-item="tiro-no-specchio-fuori" data-xg="0.2">
                <span class="micro-label">Tiro non nello specchio fuori area</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- OCCASIONI CREATE -->
    <div class="macro-category">
        <button class="macro-header">
            <span class="macro-title">OCCASIONI CREATE</span>
            <span class="macro-arrow">›</span>
        </button>
        <div class="macro-content">
            <div class="micro-header">
                <span></span>
                <span class="team-label">A FAVORE</span>
                <span class="team-label">AVVERSARI</span>
            </div>

            <div class="micro-stat" data-category="occasioni" data-item="occasione-rete" data-xg="0.7">
                <span class="micro-label">Occasione da rete non realizzata</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="occasioni" data-item="azione-gol" data-xg="0.3">
                <span class="micro-label">Azione potenzialmente da gol</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="occasioni" data-item="transizione" data-xg="0.5">
                <span class="micro-label">Transizione offensiva favorevole</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CALCI D'ANGOLO -->
    <div class="macro-category">
        <button class="macro-header">
            <span class="macro-title">CALCI D'ANGOLO</span>
            <span class="macro-arrow">›</span>
        </button>
        <div class="macro-content">
            <div class="micro-header">
                <span></span>
                <span class="team-label">A FAVORE</span>
                <span class="team-label">AVVERSARI</span>
            </div>

            <div class="micro-stat" data-category="corner" data-item="corto" data-xg="0.1">
                <span class="micro-label">Corto, non sviluppato</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="corner" data-item="sviluppo" data-xg="0.2">
                <span class="micro-label">Con sviluppo ma senza finalizzazione</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="corner" data-item="occasione" data-xg="0.4">
                <span class="micro-label">Con tiro / occasione gol in area</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- PUNIZIONI -->
    <div class="macro-category">
        <button class="macro-header">
            <span class="macro-title">PUNIZIONI</span>
            <span class="macro-arrow">›</span>
        </button>
        <div class="macro-content">
            <div class="micro-header">
                <span></span>
                <span class="team-label">A FAVORE</span>
                <span class="team-label">AVVERSARI</span>
            </div>

            <div class="micro-stat" data-category="punizioni" data-item="laterale-senza" data-xg="0.2">
                <span class="micro-label">Laterale, cross in area, senza esito</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="punizioni" data-item="laterale-occasione" data-xg="2">
                <span class="micro-label">Laterale, crea occasione / tiro</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="punizioni" data-item="diretta-specchio" data-xg="0.5">
                <span class="micro-label">Diretta, nello specchio</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="punizioni" data-item="diretta-fuori" data-xg="0.3">
                <span class="micro-label">Diretta fuori</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- RIMESSA LATERALE -->
    <div class="macro-category">
        <button class="macro-header">
            <span class="macro-title">RIMESSA LATERALE</span>
            <span class="macro-arrow">›</span>
        </button>
        <div class="macro-content">
            <div class="micro-header">
                <span></span>
                <span class="team-label">A FAVORE</span>
                <span class="team-label">AVVERSARI</span>
            </div>

            <div class="micro-stat" data-category="rimessa" data-item="pericolosa" data-xg="0.3">
                <span class="micro-label">Laterale con sviluppo pericoloso / 2ª palla</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="rimessa" data-item="non-efficace" data-xg="0.1">
                <span class="micro-label">Laterale non efficace</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ERRORI DIFENSIVI -->
    <div class="macro-category">
        <button class="macro-header">
            <span class="macro-title">ERRORI DIFENSIVI</span>
            <span class="macro-arrow">›</span>
        </button>
        <div class="macro-content">
            <div class="micro-header">
                <span></span>
                <span class="team-label">A FAVORE</span>
                <span class="team-label">AVVERSARI</span>
            </div>

            <div class="micro-stat" data-category="errori" data-item="tecnico" data-xg="0.5">
                <span class="micro-label">Tecnico in costruzione, porta palla gol</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="errori" data-item="tattico" data-xg="0.6">
                <span class="micro-label">Tattico / posizionamento, porta palla gol</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>

            <div class="micro-stat" data-category="errori" data-item="grave" data-xg="0.8">
                <span class="micro-label">Errore grave / non forzato</span>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="noi">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="noi">+</button>
                </div>
                <div class="micro-controls">
                    <button class="micro-btn minus" data-team="loro">−</button>
                    <span class="micro-value">0</span>
                    <button class="micro-btn plus" data-team="loro">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NOTE AVVERSARIO -->
    <div class="analysis-block">
        <h3>NOTE AVVERSARIO</h3>

        <div class="analysis-row">
            <label>Modulo avversario</label>
            <input type="text" placeholder="Es. 1-4-3-3">
        </div>

        <div class="analysis-row">
            <label>Stile di gioco</label>
            <input type="text" placeholder="Es. diretto / posizionale / reattivo">
        </div>

        <div class="analysis-row">
            <label>Note qualitative</label>
            <textarea rows="3" placeholder="Osservazioni libere"></textarea>
        </div>
    </div>
</section>

        </main>
    </div>

    <script>
        // Variabili globali
        let timerInterval = null;
        let totalSeconds = 0;
        let isRunning = false;
        let currentTempo = 1;
        let possessoNoi = 0;
        let possessoLoro = 0;
        let currentPossesso = null;
        let possessoStartTime = 0;
        let golNoi = 0;
        let golLoro = 0;
        let xgNoi = 0;
        let xgLoro = 0;
        let eventi = [];

        // Elementi DOM
        const timerDisplay = document.getElementById('timer-display');
        const btnStart = document.getElementById('btn-start');
        const btnPause = document.getElementById('btn-pause');
        const btnStop = document.getElementById('btn-stop');
        const btnPrimoTempo = document.getElementById('primo-tempo');
        const btnSecondoTempo = document.getElementById('secondo-tempo');
        const btnPossessoNoi = document.getElementById('btn-possesso-noi');
        const btnPossessoLoro = document.getElementById('btn-possesso-loro');
        const btnPossessoNoiPercentage = document.getElementById('btn-possesso-noi-percentage');
        const btnPossessoLoroPercentage = document.getElementById('btn-possesso-loro-percentage');
        const possessoNoiTime = document.getElementById('possesso-noi-time');
        const possessoLoroTime = document.getElementById('possesso-loro-time');
        const golNoiDisplay = document.getElementById('gol-noi');
        const golLoroDisplay = document.getElementById('gol-loro');
        const xgNoiDisplay = document.getElementById('xg-noi');
        const xgLoroDisplay = document.getElementById('xg-loro');
        const xgStatusNoi = document.getElementById('xg-status-noi');
        const xgStatusLoro = document.getElementById('xg-status-loro');
        const timelineMarkers = document.getElementById('timeline-markers');
        const eventiList = document.getElementById('eventi-list');
        const btnGolPlus = document.querySelectorAll('.btn-gol-plus');
        const btnGolMinus = document.querySelectorAll('.btn-gol-minus');

        // Funzioni Timer
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function updateTimer() {
            totalSeconds++;
            timerDisplay.textContent = formatTime(totalSeconds);
            updatePossesso();
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(updateTimer, 1000);
                btnStart.disabled = true;
                btnPause.disabled = false;
                btnStop.disabled = false;
                btnStart.textContent = 'IN CORSO...';
            }
        }

        function pauseTimer() {
            if (isRunning) {
                clearInterval(timerInterval);
                isRunning = false;
                btnStart.disabled = false;
                btnPause.disabled = true;
                btnStart.textContent = 'RIPRENDI';
            }
        }

        function stopTimer() {
    // Chiedi conferma prima di cancellare i dati
    const confirmed = confirm('Sei sicuro di voler premere STOP? Tutti i dati verranno cancellati.');
    
    if (!confirmed) {
        return; // Annulla se l'utente dice no
    }
    
    clearInterval(timerInterval);
    isRunning = false;
    totalSeconds = 0;
    possessoNoi = 0;
    possessoLoro = 0;
    currentPossesso = null;
    timerDisplay.textContent = '00:00';
    btnStart.disabled = false;
    btnPause.disabled = true;
    btnStop.disabled = true;
    btnStart.textContent = 'START';
    updatePossessoDisplay();
    btnPossessoNoi.classList.remove('active');
    btnPossessoLoro.classList.remove('active');
}

        // Funzioni Possesso
        function setPossesso(team) {
            const now = totalSeconds;
            
            if (currentPossesso && currentPossesso !== team) {
                const elapsed = now - possessoStartTime;
                if (currentPossesso === 'noi') {
                    possessoNoi += elapsed;
                } else {
                    possessoLoro += elapsed;
                }
            }
            
            currentPossesso = team;
            possessoStartTime = now;
            
            if (team === 'noi') {
                btnPossessoNoi.classList.add('active');
                btnPossessoLoro.classList.remove('active');
            } else {
                btnPossessoLoro.classList.add('active');
                btnPossessoNoi.classList.remove('active');
            }
            
            updatePossessoDisplay();
        }

        function updatePossesso() {
            if (currentPossesso && isRunning) {
                updatePossessoDisplay();
            }
        }

        // Trova questa funzione e sostituiscila:

function updatePossessoDisplay() {
    let tempNoiPossesso = possessoNoi;
    let tempLoroPossesso = possessoLoro;
    
    if (currentPossesso && isRunning) {
        const elapsed = totalSeconds - possessoStartTime;
        if (currentPossesso === 'noi') {
            tempNoiPossesso += elapsed;
        } else {
            tempLoroPossesso += elapsed;
        }
    }
    
    const total = tempNoiPossesso + tempLoroPossesso;
    
    if (total > 0) {
        const noiPercentage = (tempNoiPossesso / total) * 100;
        const loroPercentage = (tempLoroPossesso / total) * 100;
        
        btnPossessoNoiPercentage.textContent = Math.round(noiPercentage) + '%';
        btnPossessoLoroPercentage.textContent = Math.round(loroPercentage) + '%';
        possessoNoiTime.textContent = formatTime(tempNoiPossesso);
        possessoLoroTime.textContent = formatTime(tempLoroPossesso);
    } else {
        btnPossessoNoiPercentage.textContent = '50%';
        btnPossessoLoroPercentage.textContent = '50%';
        possessoNoiTime.textContent = '00:00';
        possessoLoroTime.textContent = '00:00';
    }
}

        // Funzioni Punteggio
        function addGol(team) {
            if (team === 'noi') {
                golNoi++;
                golNoiDisplay.textContent = golNoi;
            } else {
                golLoro++;
                golLoroDisplay.textContent = golLoro;
            }
            
            const time = formatTime(totalSeconds);
            const evento = {
                type: 'gol',
                team: team,
                time: time,
                minute: totalSeconds,
                timestamp: Date.now()
            };
            eventi.push(evento);
            
            updateTimeline();
            updateEventiList();
            updateXgStatus();
        }

        function removeGol(team) {
            if (team === 'noi' && golNoi > 0) {
                golNoi--;
                golNoiDisplay.textContent = golNoi;
                
                for (let i = eventi.length - 1; i >= 0; i--) {
                    if (eventi[i].type === 'gol' && eventi[i].team === 'noi') {
                        eventi.splice(i, 1);
                        break;
                    }
                }
            } else if (team === 'loro' && golLoro > 0) {
                golLoro--;
                golLoroDisplay.textContent = golLoro;
                
                for (let i = eventi.length - 1; i >= 0; i--) {
                    if (eventi[i].type === 'gol' && eventi[i].team === 'loro') {
                        eventi.splice(i, 1);
                        break;
                    }
                }
            }
            
            updateTimeline();
            updateEventiList();
            updateXgStatus();
        }

        function updateXG(team, value) {
            if (team === 'noi') {
                xgNoi += value;
                xgNoiDisplay.textContent = xgNoi.toFixed(2);
            } else {
                xgLoro += value;
                xgLoroDisplay.textContent = xgLoro.toFixed(2);
            }
            updateXgStatus();
        }

        function updateXgStatus() {
            const statusNoiBadge = xgStatusNoi.querySelector('.status-badge');
            if (xgNoi > golNoi) {
                statusNoiBadge.textContent = 'Underperformance';
                statusNoiBadge.className = 'status-badge under';
            } else if (xgNoi < golNoi) {
                statusNoiBadge.textContent = 'Overperformance';
                statusNoiBadge.className = 'status-badge over';
            } else {
                statusNoiBadge.textContent = 'OK';
                statusNoiBadge.className = 'status-badge ok';
            }
            
            const statusLoroBadge = xgStatusLoro.querySelector('.status-badge');
            if (xgLoro > golLoro) {
                statusLoroBadge.textContent = 'Underperformance';
                statusLoroBadge.className = 'status-badge under';
            } else if (xgLoro < golLoro) {
                statusLoroBadge.textContent = 'Overperformance';
                statusLoroBadge.className = 'status-badge over';
                } else if (xgLoro < golLoro) {
    statusLoroBadge.textContent = 'Overperformance';
    statusLoroBadge.className = 'status-badge over';
        } else {
            statusLoroBadge.textContent = 'OK';
            statusLoroBadge.className = 'status-badge ok';
        }
    }
        function updateTimeline() {
            timelineMarkers.innerHTML = '';

            eventi.forEach(evento => {
                if (evento.type === 'gol') {
                    const marker = document.createElement('div');
                    marker.classList.add('timeline-marker');
                    marker.classList.add(evento.team === 'noi' ? 'gol-noi' : 'gol-loro');

                    const percent = Math.min((evento.minute / 5400) * 100, 100);
                    marker.style.left = percent + '%';

                    timelineMarkers.appendChild(marker);
                }
            });
        }

        function updateEventiList() {
            eventiList.innerHTML = '';

            if (eventi.length === 0) {
                eventiList.innerHTML = `<p class="no-eventi">Nessun evento registrato</p>`;
                return;
            }

            eventi
                .slice()
                .reverse()
                .forEach((evento, index) => {
                    const item = document.createElement('div');
                    item.className = 'evento-item';

                    item.innerHTML = `
                        <div class="evento-info">
                            <span class="evento-time">${evento.time}</span>
                            <span class="evento-team">${evento.team}</span>
                            <span class="evento-desc">Gol</span>
                        </div>
                        <button class="evento-delete" data-index="${eventi.length - 1 - index}">
                            Elimina
                        </button>
                    `;

                    eventiList.appendChild(item);
                });

            document.querySelectorAll('.evento-delete').forEach(btn => {
                btn.addEventListener('click', e => {
                    const idx = parseInt(e.target.dataset.index);
                    eventi.splice(idx, 1);
                    updateTimeline();
                    updateEventiList();
                });
            });
        }
        // TIMER
        btnStart.addEventListener('click', startTimer);
        btnPause.addEventListener('click', pauseTimer);
        btnStop.addEventListener('click', stopTimer);

        // POSSESSO
        btnPossessoNoi.addEventListener('click', () => setPossesso('noi'));
        btnPossessoLoro.addEventListener('click', () => setPossesso('loro'));

        // TEMPI
        btnPrimoTempo.addEventListener('click', () => {
            currentTempo = 1;
            btnPrimoTempo.classList.add('active');
            btnSecondoTempo.classList.remove('active');
        });

        btnSecondoTempo.addEventListener('click', () => {
            currentTempo = 2;
            btnSecondoTempo.classList.add('active');
            btnPrimoTempo.classList.remove('active');
        });

        // GOL
        btnGolPlus.forEach(btn => {
            btn.addEventListener('click', () => {
                addGol(btn.dataset.team);
            });
        });

        btnGolMinus.forEach(btn => {
            btn.addEventListener('click', () => {
                removeGol(btn.dataset.team);
            });
        });
        updatePossessoDisplay();
    </script>
    <script>
document.querySelectorAll('.team-score').forEach(team => {
    const plusBtn = team.querySelector('.score-plus');
    const minusBtn = team.querySelector('.score-minus');
    const valueEl = team.querySelector('.score-value');

    plusBtn.addEventListener('click', () => {
        let value = parseInt(valueEl.textContent);
        valueEl.textContent = value + 1;
    });

    minusBtn.addEventListener('click', () => {
        let value = parseInt(valueEl.textContent);
        if (value > 0) {
            valueEl.textContent = value - 1;
        }
    });
});
</script>
<script>
// ===== PUNTEGGIO CON xG E xPTS =====
(function() {
    let golNoi = 0;
    let golLoro = 0;
    let xgNoiValue = 0;
    let xgLoroValue = 0;

    const golNoiEl = document.getElementById('gol-noi-new');
    const golLoroEl = document.getElementById('gol-loro-new');
    const xgNoiEl = document.getElementById('xg-noi-new');
    const xgLoroEl = document.getElementById('xg-loro-new');
    const xptsNoiEl = document.getElementById('xpts-noi');
    const xptsLoroEl = document.getElementById('xpts-loro');
    const perfNoiEl = document.getElementById('perf-noi');
    const perfLoroEl = document.getElementById('perf-loro');

    function calculateXPoints(ourXg, theirXg) {
    const diff = ourXg - theirXg;
    
    // Mappa della tabella allegata
    if (diff >= 1.5) {
        return 2.7;
    } else if (diff >= 1 && diff < 1.5) {
        return 2.3;
    } else if (diff >= 0.5 && diff < 1) {
        return 2;
    } else if (diff >= 0 && diff < 0.5) {
        return 1.5;
    } else if (diff >= -0.5 && diff < 0) {
        return 0.7;
    } else if (diff >= -1 && diff < -0.5) {
        return 0.5;
    } else if (diff >= -1.5 && diff < -1) {
        return 0.3;
    } else if (diff < -1.5) {
        return 0.1;
    }
}


    // Animazione contatore
    function animateValue(element, start, end, duration) {
        const range = end - start;
        const increment = range / (duration / 16);
        let current = start;
        
        const timer = setInterval(() => {
            current += increment;
            if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                current = end;
                clearInterval(timer);
            }
            element.textContent = Math.round(current);
        }, 16);
    }

    // Update display con animazioni
    function updateDisplay() {
        // Anima i gol
        const oldGolNoi = parseInt(golNoiEl.textContent);
        const oldGolLoro = parseInt(golLoroEl.textContent);
        
        if (oldGolNoi !== golNoi) {
            animateValue(golNoiEl, oldGolNoi, golNoi, 300);
        }
        if (oldGolLoro !== golLoro) {
            animateValue(golLoroEl, oldGolLoro, golLoro, 300);
        }

        // Update xG
        xgNoiEl.textContent = xgNoiValue.toFixed(2);
        xgLoroEl.textContent = xgLoroValue.toFixed(2);

        // Calcola xPoints
        const xptsNoi = calculateXPoints(xgNoiValue, xgLoroValue);
        const xptsLoro = calculateXPoints(xgLoroValue, xgNoiValue);
        xptsNoiEl.textContent = xptsNoi;
        xptsLoroEl.textContent = xptsLoro;

        // Formattazione condizionale xG NOI
        const xgNoiBox = xgNoiEl.parentElement;
        if (xgNoiValue > xgLoroValue) {
            xgNoiBox.style.background = 'rgba(0, 212, 170, 0.08)';
            xgNoiBox.style.borderColor = 'rgba(0, 212, 170, 0.2)';
            xgNoiEl.style.color = '#00d4aa';
        } else if (xgNoiValue < xgLoroValue) {
            xgNoiBox.style.background = 'rgba(255, 59, 48, 0.08)';
            xgNoiBox.style.borderColor = 'rgba(255, 59, 48, 0.2)';
            xgNoiEl.style.color = '#ff3b30';
        } else {
            xgNoiBox.style.background = 'rgba(0, 122, 255, 0.08)';
            xgNoiBox.style.borderColor = 'rgba(0, 122, 255, 0.2)';
            xgNoiEl.style.color = '#007aff';
        }

        // Formattazione condizionale xG LORO
        const xgLoroBox = xgLoroEl.parentElement;
        if (xgLoroValue > xgNoiValue) {
            xgLoroBox.style.background = 'rgba(0, 212, 170, 0.08)';
            xgLoroBox.style.borderColor = 'rgba(0, 212, 170, 0.2)';
            xgLoroEl.style.color = '#00d4aa';
        } else if (xgLoroValue < xgNoiValue) {
            xgLoroBox.style.background = 'rgba(255, 59, 48, 0.08)';
            xgLoroBox.style.borderColor = 'rgba(255, 59, 48, 0.2)';
            xgLoroEl.style.color = '#ff3b30';
        } else {
            xgLoroBox.style.background = 'rgba(0, 122, 255, 0.08)';
            xgLoroBox.style.borderColor = 'rgba(0, 122, 255, 0.2)';
            xgLoroEl.style.color = '#007aff';
        }

        // Formattazione condizionale xPts NOI
        const xptsNoiBox = xptsNoiEl.parentElement;
        if (parseFloat(xptsNoi) > 1.5) {
            xptsNoiBox.style.background = 'rgba(0, 212, 170, 0.08)';
            xptsNoiBox.style.borderColor = 'rgba(0, 212, 170, 0.2)';
            xptsNoiEl.style.color = '#00d4aa';
        } else if (parseFloat(xptsNoi) < 1) {
            xptsNoiBox.style.background = 'rgba(255, 59, 48, 0.08)';
            xptsNoiBox.style.borderColor = 'rgba(255, 59, 48, 0.2)';
            xptsNoiEl.style.color = '#ff3b30';
        } else {
            xptsNoiBox.style.background = 'rgba(0, 122, 255, 0.08)';
            xptsNoiBox.style.borderColor = 'rgba(0, 122, 255, 0.2)';
            xptsNoiEl.style.color = '#007aff';
        }

        // Formattazione condizionale xPts LORO
        const xptsLoroBox = xptsLoroEl.parentElement;
        if (parseFloat(xptsLoro) > 1.5) {
            xptsLoroBox.style.background = 'rgba(0, 212, 170, 0.08)';
            xptsLoroBox.style.borderColor = 'rgba(0, 212, 170, 0.2)';
            xptsLoroEl.style.color = '#00d4aa';
        } else if (parseFloat(xptsLoro) < 1) {
            xptsLoroBox.style.background = 'rgba(255, 59, 48, 0.08)';
            xptsLoroBox.style.borderColor = 'rgba(255, 59, 48, 0.2)';
            xptsLoroEl.style.color = '#ff3b30';
        } else {
            xptsLoroBox.style.background = 'rgba(0, 122, 255, 0.08)';
            xptsLoroBox.style.borderColor = 'rgba(0, 122, 255, 0.2)';
            xptsLoroEl.style.color = '#007aff';
        }

        // Performance NOI
        const perfNoiBox = perfNoiEl.parentElement;
        const diff = golNoi - xgNoiValue;
        if (diff > 0.3) {
            perfNoiEl.textContent = 'Overperformance';
            perfNoiBox.style.background = 'rgba(0, 212, 170, 0.15)';
            perfNoiBox.style.borderColor = 'rgba(0, 212, 170, 0.3)';
            perfNoiEl.style.color = '#00d4aa';
        } else if (diff < -0.3) {
            perfNoiEl.textContent = 'Underperformance';
            perfNoiBox.style.background = 'rgba(255, 59, 48, 0.15)';
            perfNoiBox.style.borderColor = 'rgba(255, 59, 48, 0.3)';
            perfNoiEl.style.color = '#ff3b30';
        } else {
            perfNoiEl.textContent = 'OK';
            perfNoiBox.style.background = 'rgba(0, 122, 255, 0.15)';
            perfNoiBox.style.borderColor = 'rgba(0, 122, 255, 0.3)';
            perfNoiEl.style.color = '#007aff';
        }

        // Performance LORO
        const perfLoroBox = perfLoroEl.parentElement;
        const diffLoro = golLoro - xgLoroValue;
        if (diffLoro > 0.3) {
            perfLoroEl.textContent = 'Overperformance';
            perfLoroBox.style.background = 'rgba(0, 212, 170, 0.15)';
            perfLoroBox.style.borderColor = 'rgba(0, 212, 170, 0.3)';
            perfLoroEl.style.color = '#00d4aa';
        } else if (diffLoro < -0.3) {
            perfLoroEl.textContent = 'Underperformance';
            perfLoroBox.style.background = 'rgba(255, 59, 48, 0.15)';
            perfLoroBox.style.borderColor = 'rgba(255, 59, 48, 0.3)';
            perfLoroEl.style.color = '#ff3b30';
        } else {
            perfLoroEl.textContent = 'OK';
            perfLoroBox.style.background = 'rgba(0, 122, 255, 0.15)';
            perfLoroBox.style.borderColor = 'rgba(0, 122, 255, 0.3)';
            perfLoroEl.style.color = '#007aff';
        }
    }

    // Event listeners per i pulsanti gol (nuova sezione)
    document.querySelectorAll('.btn-gol-plus').forEach(btn => {
        if (btn.dataset.team === 'noi' || btn.dataset.team === 'loro') {
            btn.addEventListener('click', (e) => {
                const team = e.target.dataset.team;
                if (team === 'noi') {
                    golNoi++;
                } else {
                    golLoro++;
                }
                updateDisplay();
            });
        }
    });

    document.querySelectorAll('.btn-gol-minus').forEach(btn => {
        if (btn.dataset.team === 'noi' || btn.dataset.team === 'loro') {
            btn.addEventListener('click', (e) => {
                const team = e.target.dataset.team;
                if (team === 'noi' && golNoi > 0) {
                    golNoi--;
                } else if (team === 'loro' && golLoro > 0) {
                    golLoro--;
                }
                updateDisplay();
            });
        }
    });

    // Inizializza
    updateDisplay();
})();
</script>
<script>
// ===== ANALISI TATTICA - ACCORDION E CONTATORI =====
(function() {
    // Accordion toggle
    document.querySelectorAll('.macro-header').forEach(header => {
        header.addEventListener('click', () => {
            const category = header.parentElement;
            category.classList.toggle('open');
        });
    });

    // Contatori e xG
    let xgNoiTotal = 0;
    let xgLoroTotal = 0;

    // Funzione per aggiornare xG globali
    function updateGlobalXG() {
        // Prendi gli elementi dal punteggio
        const xgNoiEl = document.getElementById('xg-noi-new');
        const xgLoroEl = document.getElementById('xg-loro-new');
        
        if (xgNoiEl && xgLoroEl) {
            xgNoiEl.textContent = xgNoiTotal.toFixed(2);
            xgLoroEl.textContent = xgLoroTotal.toFixed(2);
            
            // Trigghera l'update del display del punteggio
            if (window.updateScoreDisplay) {
                window.updateScoreDisplay();
            }
        }
    }

    // Event listeners per tutti i pulsanti
    document.querySelectorAll('.micro-stat').forEach(stat => {
        const xgValue = parseFloat(stat.dataset.xg);
        const controls = stat.querySelectorAll('.micro-controls');
        
        // NOI (prima colonna)
        const noiControls = controls[0];
        const noiValue = noiControls.querySelector('.micro-value');
        const noiPlus = noiControls.querySelector('.plus');
        const noiMinus = noiControls.querySelector('.minus');
        
        noiPlus.addEventListener('click', () => {
            let current = parseInt(noiValue.textContent);
            noiValue.textContent = current + 1;
            xgNoiTotal += xgValue;
            updateGlobalXG();
        });
        
        noiMinus.addEventListener('click', () => {
            let current = parseInt(noiValue.textContent);
            if (current > 0) {
                noiValue.textContent = current - 1;
                xgNoiTotal -= xgValue;
                updateGlobalXG();
            }
        });
        
        // LORO (seconda colonna)
        const loroControls = controls[1];
        const loroValue = loroControls.querySelector('.micro-value');
        const loroPlus = loroControls.querySelector('.plus');
        const loroMinus = loroControls.querySelector('.minus');
        
        loroPlus.addEventListener('click', () => {
            let current = parseInt(loroValue.textContent);
            loroValue.textContent = current + 1;
            xgLoroTotal += xgValue;
            updateGlobalXG();
        });
        
        loroMinus.addEventListener('click', () => {
            let current = parseInt(loroValue.textContent);
            if (current > 0) {
                loroValue.textContent = current - 1;
                xgLoroTotal -= xgValue;
                updateGlobalXG();
            }
        });
    });
})();
</script>
</body>
</html>
